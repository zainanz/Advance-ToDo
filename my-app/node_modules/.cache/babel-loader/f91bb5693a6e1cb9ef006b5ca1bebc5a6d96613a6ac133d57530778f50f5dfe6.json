{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport Cookies from 'js-cookie';\nconst initialState = {\n  isLoggedIn: false,\n  token: null,\n  // Add token to state\n  status: 'idle',\n  // Add status for async operations\n  error: null\n};\nexport const login = createAsyncThunk('auth/login', async userData => {\n  const response = await fetch(\"http://localhost:3000/login\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userData)\n  });\n  if (!response.ok) {\n    throw new Error('Login failed');\n  }\n  const data = await response.json();\n  // Optionally store the token in cookies\n  Cookies.set('token', data.token);\n});\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout(state) {\n      state.isLoggedIn = false;\n    },\n    extraReducers: builder => {\n      builder.updateLogin(login.pending, state => {\n        console.log(state);\n        state.status = 'pending';\n      }).updateLogin(login.fulfilled, state => {\n        state.isLoggedIn = true;\n      }).updateLogin(login.rejected, (state, action) => {\n        console.log(action);\n        state.status = \"idle\";\n        state.error = action.error.message;\n      });\n    }\n  }\n});\nexport const {\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Cookies","initialState","isLoggedIn","token","status","error","login","userData","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","set","authSlice","name","reducers","logout","state","extraReducers","builder","updateLogin","pending","console","log","fulfilled","rejected","action","message","actions","reducer"],"sources":["/home/zainan-ali/code/zainanz/test-components/my-app/src/app/store/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport Cookies from 'js-cookie';\n\nconst initialState = {\n  isLoggedIn: false,\n  token: null, // Add token to state\n  status: 'idle', // Add status for async operations\n  error: null\n}\n\nexport const login = createAsyncThunk('auth/login', async (userData) => {\n  const response = await fetch(\"http://localhost:3000/login\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(userData),\n  });\n\n  if (!response.ok) {\n    throw new Error('Login failed');\n  }\n\n  const data = await response.json();\n  // Optionally store the token in cookies\n  Cookies.set('token', data.token);\n});\n\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout(state){\n      state.isLoggedIn = false;\n    },\n    extraReducers: (builder) => {\n      builder\n        .updateLogin(login.pending, (state) => {\n          console.log(state);\n          state.status = 'pending';\n        })\n        .updateLogin(login.fulfilled, (state) => {\n          state.isLoggedIn = true;\n        })\n        .updateLogin(login.rejected, (state, action)=> {\n          console.log(action);\n\n          state.status = \"idle\";\n          state.error = action.error.message;\n        })\n    }\n}})\n\n\nexport const {logout} = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,OAAO,MAAM,WAAW;AAE/B,MAAMC,YAAY,GAAG;EACnBC,UAAU,EAAE,KAAK;EACjBC,KAAK,EAAE,IAAI;EAAE;EACbC,MAAM,EAAE,MAAM;EAAE;EAChBC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,KAAK,GAAGP,gBAAgB,CAAC,YAAY,EAAE,MAAOQ,QAAQ,IAAK;EACtE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6B,EAAE;IAC1DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ;EAC/B,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;EACjC;EAEA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;EAClC;EACAlB,OAAO,CAACmB,GAAG,CAAC,OAAO,EAAEF,IAAI,CAACd,KAAK,CAAC;AAClC,CAAC,CAAC;AAGF,MAAMiB,SAAS,GAAGtB,WAAW,CAAC;EAC5BuB,IAAI,EAAE,MAAM;EACZpB,YAAY;EACZqB,QAAQ,EAAE;IACRC,MAAMA,CAACC,KAAK,EAAC;MACXA,KAAK,CAACtB,UAAU,GAAG,KAAK;IAC1B,CAAC;IACDuB,aAAa,EAAGC,OAAO,IAAK;MAC1BA,OAAO,CACJC,WAAW,CAACrB,KAAK,CAACsB,OAAO,EAAGJ,KAAK,IAAK;QACrCK,OAAO,CAACC,GAAG,CAACN,KAAK,CAAC;QAClBA,KAAK,CAACpB,MAAM,GAAG,SAAS;MAC1B,CAAC,CAAC,CACDuB,WAAW,CAACrB,KAAK,CAACyB,SAAS,EAAGP,KAAK,IAAK;QACvCA,KAAK,CAACtB,UAAU,GAAG,IAAI;MACzB,CAAC,CAAC,CACDyB,WAAW,CAACrB,KAAK,CAAC0B,QAAQ,EAAE,CAACR,KAAK,EAAES,MAAM,KAAI;QAC7CJ,OAAO,CAACC,GAAG,CAACG,MAAM,CAAC;QAEnBT,KAAK,CAACpB,MAAM,GAAG,MAAM;QACrBoB,KAAK,CAACnB,KAAK,GAAG4B,MAAM,CAAC5B,KAAK,CAAC6B,OAAO;MACpC,CAAC,CAAC;IACN;EACJ;AAAC,CAAC,CAAC;AAGH,OAAO,MAAM;EAACX;AAAM,CAAC,GAAGH,SAAS,CAACe,OAAO;AACzC,eAAef,SAAS,CAACgB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}