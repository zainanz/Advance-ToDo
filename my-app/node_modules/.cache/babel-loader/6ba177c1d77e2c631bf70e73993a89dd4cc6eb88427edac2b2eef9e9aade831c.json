{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport Cookies from 'js-cookie';\nconst initialState = {\n  isLoggedIn: false,\n  token: null,\n  // Add token to state\n  status: 'idle',\n  // Add status for async operations\n  error: null\n};\nexport const login = createAsyncThunk('auth/login', async userData => {\n  const response = await fetch(\"http://localhost:3000/login\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userData)\n  });\n  if (!response.ok) {\n    const data = await response.json();\n    throw new Error(data);\n  }\n  const data = await response.json();\n  // Optionally store the token in cookies\n  Cookies.set('token', data.token);\n  return data.token; // Return the token to the fulfilled action\n});\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout(state) {\n      state.isLoggedIn = false;\n      state.token = null; // Clear the token when logging out\n      Cookies.remove('token'); // Optionally remove the token from cookies\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      console.log(state);\n      state.status = 'pending';\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoggedIn = true;\n      state.token = action.payload; // Set the token from the fulfilled action payload\n      state.status = 'idle'; // Reset the status\n      console.log(\"Login successful\", action.payload);\n    }).addCase(login.rejected, (state, action) => {\n      console.log(action);\n      state.status = \"idle\";\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Cookies","initialState","isLoggedIn","token","status","error","login","userData","response","fetch","method","headers","body","JSON","stringify","ok","data","json","Error","set","authSlice","name","reducers","logout","state","remove","extraReducers","builder","addCase","pending","console","log","fulfilled","action","payload","rejected","message","actions","reducer"],"sources":["/home/zainan-ali/code/zainanz/test-components/my-app/src/app/store/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport Cookies from 'js-cookie';\n\nconst initialState = {\n  isLoggedIn: false,\n  token: null, // Add token to state\n  status: 'idle', // Add status for async operations\n  error: null\n}\n\nexport const login = createAsyncThunk('auth/login', async (userData) => {\n  const response = await fetch(\"http://localhost:3000/login\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(userData),\n  });\n\n  if (!response.ok) {\n    const data = await response.json();\n    throw new Error(data);\n  }\n\n  const data = await response.json();\n  // Optionally store the token in cookies\n  Cookies.set('token', data.token);\n  return data.token; // Return the token to the fulfilled action\n});\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout(state){\n      state.isLoggedIn = false;\n      state.token = null; // Clear the token when logging out\n      Cookies.remove('token'); // Optionally remove the token from cookies\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(login.pending, (state) => {\n        console.log(state);\n        state.status = 'pending';\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoggedIn = true;\n        state.token = action.payload; // Set the token from the fulfilled action payload\n        state.status = 'idle'; // Reset the status\n        console.log(\"Login successful\", action.payload);\n      })\n      .addCase(login.rejected, (state, action) => {\n        console.log(action);\n        state.status = \"idle\";\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const { logout } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,OAAO,MAAM,WAAW;AAE/B,MAAMC,YAAY,GAAG;EACnBC,UAAU,EAAE,KAAK;EACjBC,KAAK,EAAE,IAAI;EAAE;EACbC,MAAM,EAAE,MAAM;EAAE;EAChBC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,KAAK,GAAGP,gBAAgB,CAAC,YAAY,EAAE,MAAOQ,QAAQ,IAAK;EACtE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6B,EAAE;IAC1DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ;EAC/B,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;IAChB,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;IAClC,MAAM,IAAIC,KAAK,CAACF,IAAI,CAAC;EACvB;EAEA,MAAMA,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;EAClC;EACAjB,OAAO,CAACmB,GAAG,CAAC,OAAO,EAAEH,IAAI,CAACb,KAAK,CAAC;EAChC,OAAOa,IAAI,CAACb,KAAK,CAAC,CAAC;AACrB,CAAC,CAAC;AAEF,MAAMiB,SAAS,GAAGtB,WAAW,CAAC;EAC5BuB,IAAI,EAAE,MAAM;EACZpB,YAAY;EACZqB,QAAQ,EAAE;IACRC,MAAMA,CAACC,KAAK,EAAC;MACXA,KAAK,CAACtB,UAAU,GAAG,KAAK;MACxBsB,KAAK,CAACrB,KAAK,GAAG,IAAI,CAAC,CAAC;MACpBH,OAAO,CAACyB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;IAC3B;EACF,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACtB,KAAK,CAACuB,OAAO,EAAGL,KAAK,IAAK;MACjCM,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC;MAClBA,KAAK,CAACpB,MAAM,GAAG,SAAS;IAC1B,CAAC,CAAC,CACDwB,OAAO,CAACtB,KAAK,CAAC0B,SAAS,EAAE,CAACR,KAAK,EAAES,MAAM,KAAK;MAC3CT,KAAK,CAACtB,UAAU,GAAG,IAAI;MACvBsB,KAAK,CAACrB,KAAK,GAAG8B,MAAM,CAACC,OAAO,CAAC,CAAC;MAC9BV,KAAK,CAACpB,MAAM,GAAG,MAAM,CAAC,CAAC;MACvB0B,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEE,MAAM,CAACC,OAAO,CAAC;IACjD,CAAC,CAAC,CACDN,OAAO,CAACtB,KAAK,CAAC6B,QAAQ,EAAE,CAACX,KAAK,EAAES,MAAM,KAAK;MAC1CH,OAAO,CAACC,GAAG,CAACE,MAAM,CAAC;MACnBT,KAAK,CAACpB,MAAM,GAAG,MAAM;MACrBoB,KAAK,CAACnB,KAAK,GAAG4B,MAAM,CAAC5B,KAAK,CAAC+B,OAAO;IACpC,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEb;AAAO,CAAC,GAAGH,SAAS,CAACiB,OAAO;AAC3C,eAAejB,SAAS,CAACkB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}